name: Mise √† jour automatique ü§ñ

# Quand est-ce que le robot doit s'allumer ?
on:
  push:
    branches:
      - main
    paths:
      - 'cours/**'  # Seulement si on ajoute/supprime un cours
      - 'maj.py'    # Ou si on modifie le script

jobs:
  update-site:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Autorise le robot √† modifier le site

    steps:
      - name: üì• R√©cup√©ration des fichiers
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: üêç Pr√©paration de l'ordinateur virtuel (Python)
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: ‚öôÔ∏è Ex√©cution de ton script maj.py
        run: |
          # On donne un faux nom au robot pour qu'il puisse sauvegarder
          git config --global user.name "Robot Drive L1"
          git config --global user.email "robot@github.com"
          
          # Le robot appuie sur le bouton Play √† ta place !
          python maj.py
