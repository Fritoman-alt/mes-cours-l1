name: Mise √† jour automatique ü§ñ

on:
  push:
    branches:
      - main
    paths:
      - 'cours/**'
      - 'maj.py'
  workflow_dispatch:

jobs:
  update-site:
    if: github.actor != 'Robot Drive L1'
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: üì• R√©cup√©ration des fichiers
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: üêç Pr√©paration de l'ordinateur virtuel (Python)
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: ‚öôÔ∏è Ex√©cution de ton script maj.py
        env:
          DRIVE_LOGIN: ${{ secrets.DRIVE_LOGIN }}
          DRIVE_MDP: ${{ secrets.DRIVE_MDP }}
        run: |
          git config --global user.name "Robot Drive L1"
          git config --global user.email "robot@github.com"
          python maj.py
